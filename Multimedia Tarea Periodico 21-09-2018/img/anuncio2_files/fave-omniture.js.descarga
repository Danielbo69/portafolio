window.FAVE=window.FAVE||{};(function(){'use strict';FAVE.components=FAVE.components||{};FAVE.components.Omniture=function Omniture(omnitureObject){this.settings=FAVE.settings.jsmd;this.configs=omnitureObject.configs;this.omniture={};this.omniture.content=omnitureObject.videoJSON||{};this.omniture.content.video_player=this.settings.videoPlayer;this.isUnAuthLive=function isUnAuthLive(video){return(video.indexOf('cvplive/')!==-1);};};FAVE.components.Omniture.prototype.onPlayerReady=function onPlayerReady(containerId,playerId,contentId){var docBody=window.document.body,videoPlayerInst='';if(docBody.className.match('home')||docBody.className.match('archive')){var eleVideoContainer=window.document.getElementById(containerId),isAutoplayMute=false,isAutoStart=false,eleSectionWrap=eleVideoContainer.closest('section');if(null!==eleSectionWrap){if(eleSectionWrap.className.match('video-box')||eleSectionWrap.className.match('promo-box')){if(eleVideoContainer.closest('article').hasAttribute('data-video-autoplay-muted')){isAutoplayMute=('true'===eleVideoContainer.closest('article').getAttribute('data-video-autoplay-muted'))?true:false;}
if(eleVideoContainer.closest('article').hasAttribute('data-video-autostart')){isAutoStart=('true'===eleVideoContainer.closest('article').getAttribute('data-video-autostart'))?true:false;}
videoPlayerInst=FAVE.player.getInstance(containerId);if(videoPlayerInst!==''&&isAutoStart&&isAutoplayMute){videoPlayerInst.mute();}}}}
if(docBody.className.match('single-video')||docBody.className.match('single-post')){videoPlayerInst=FAVE.player.getInstance(containerId);if(videoPlayerInst!==''&&videoPlayerInst.isMuted()){videoPlayerInst.unmute();}}};FAVE.components.Omniture.prototype.onContentEntryLoad=function onContentEntryLoad(containerId,playerId,contentId){};FAVE.components.Omniture.prototype.onContentMetadata=function onContentMetadata(containerId,playerId,contentId,duration,wth,ht){};FAVE.components.Omniture.prototype.onContentBegin=function onContentBegin(containerId,playerId,contentId){if(!window.jsmd&&_jsmd){window.jsmd=_jsmd.init();}
this.omniture.plugin=Object.create(new window._jsmd.plugin.gCNNVideoCollection());};FAVE.components.Omniture.prototype.onContentPlay=function onContentPlay(containerId,playerId,contentId){var eventType=(this.configs.autostart)?'video-autostart':'video-start';if(this.isUnAuthLive(contentId)){if(this.configs.context==='stunt_player'){window.live_interval=60;}
eventType='video-live';}
if(typeof this.omniture.plugin!=='undefined'){window.sendVideo2Event(this.omniture.content,eventType,playerId);}
if(!window.document.body.className.match('env-preprod')&&typeof obApi==='function'){obApi('track','Video View');}};FAVE.components.Omniture.prototype.onContentComplete=function onContentComplete(containerId,playerId,contentId){if(typeof this.omniture.plugin!=='undefined'){window.sendVideo2Event(this.omniture.content,'video-complete',playerId);}};FAVE.components.Omniture.prototype.onContentReplayRequest=function onContentReplayRequest(containerId,playerId,contentId,playObj){};FAVE.components.Omniture.prototype.onContentEnd=function onContentEnd(containerId,playerId,contentId){};FAVE.components.Omniture.prototype.onContentPlayhead=function onContentPlayhead(containerId,playerId,contentId,playhead,duration){if(typeof this.omniture.plugin!=='undefined'&&typeof playhead!=='undefined'&&!this.omniture.plugin.get(playerId,'hasScrubbed')){if(playhead>(duration*0.75)&&!this.omniture.plugin.get(contentId,'isSeventyFive')){window.sendVideo2Event(this.omniture.content,'video-seventyfive',playerId);}else if(playhead>(duration*0.5)&&!this.omniture.plugin.get(contentId,'isHalf')){window.sendVideo2Event(this.omniture.content,'video-fifty',playerId);}else if(playhead>(duration*0.25)&&!this.omniture.plugin.get(contentId,'isTwentyFive')){window.sendVideo2Event(this.omniture.content,'video-twentyfive',playerId);}else if(playhead>(duration*0.1)&&!this.omniture.plugin.get(contentId,'isTen')){window.sendVideo2Event(this.omniture.content,'video-ten',playerId);}}};FAVE.components.Omniture.prototype.onAdPlay=function(containerId,playerId,token,mode,id,duration,blockId,adType){if(typeof this.omniture.plugin!=='undefined'){this.omniture.content.ad_duration=duration;this.omniture.content.adType=adType;window.sendVideo2Event(this.omniture.content,'video-preroll',playerId);}};FAVE.components.Omniture.prototype.onAdEnd=function(containerId,playerId,token,mode,id,blockId,adType){if(typeof this.omniture.plugin!=='undefined'){this.omniture.content.adType=adType;window.sendVideo2Event(this.omniture.content,'video-adcomplete',playerId);}};FAVE.components.Omniture.prototype.onContentPause=function(containerId,playerId,contentId,paused){this.omniture.content.paused=paused;window.sendVideo2Event(this.omniture.content,'video-pause',playerId);};FAVE.components.Omniture.prototype.onTrackingContentSeek=function(containerId,playerId,dataObj){};FAVE.components.Omniture.prototype.onContentBuffering=function(containerId,playerId,contentId,buffering){window.sendVideo2Event(this.omniture.content,'video-buffer',playerId);};FAVE.components.Omniture.prototype.onTrackingContentProgress=function(containerId,playerId,dataObj){};}());